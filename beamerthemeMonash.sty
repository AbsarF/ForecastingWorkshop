% Loosely based on Boadilla by Manuel Carro
% Original:
% Copyright 2004 by Manuel Carro <mcarro@fi.upm.es>
%
% This program can be redistributed and/or modified under the terms
% of the GNU Public License, version 2.
%
% Modified by Raymond Nepstad to create the ift theme
% Then modified by Rob Hyndman to create the monash theme
% Last updated: 31 March 2016
% Must be bundled with MonashTitleSlide.png

% Graphics
\usepackage{graphicx}
\usepackage{pifont}

% Figure placement using textpos
\usepackage[absolute,overlay]{textpos}
\setlength{\TPHorizModule}{1cm}
\setlength{\TPVertModule}{1cm}
\def\placefig#1#2#3#4{\begin{textblock}{.1}(#1,#2)\rlap{\includegraphics[#3]{#4}}\end{textblock}}
\def\fullheight#1{\placefig{0.1}{1.1}{height=8.2cm}{#1}}
\def\fullwidth#1{\placefig{0.1}{1.1}{width=12.6cm}{#1}}

% Clever right hand placement
\newcommand*{\atright}[1]{{%
  \unskip\nobreak\hfill\penalty50
  \hskip2em\hbox{}\nobreak\hfill#1
  \parfillskip=0pt\finalhyphendemerits=0\par}}

% Slow reveal lists
\def\biz{\begin{itemize}[<+-| alert@+>]}
\def\eiz{\end{itemize}}
\def\ben{\begin{enumerate}[<+-| alert@+>]}
\def\een{\end{enumerate}}

% Fix dates
\usepackage[no-weekday]{eukdate}
\mode<presentation>

\newif\ifbeamer@secheader
\beamer@secheaderfalse

\DeclareOptionBeamer{secheader}{\beamer@secheadertrue}
\ProcessOptionsBeamer

%
% Color definitions
%
\definecolor{monashblue}{RGB}{0, 99, 167}
\definecolor{orange}{RGB}{204, 89, 0}

\useinnertheme[shadow]{rounded}
\useoutertheme{monash}
\usefonttheme{structurebold}

\AtBeginSection[] {
  \begin{frame} %<beamer>%[squeeze]
	\frametitle{Outline}
    \tableofcontents[currentsection]
  \end{frame}
}

\def\notoc{\AtBeginSection[]{}}

%\setbeamercolor{boxl}{fg=black,bg=monashblue!20!white}
%\setbeamercolor{boxu}{fg=white,bg=monashblue}

%
% Redefinition of beamer colors
%

\setbeamercolor{enumerate item}{fg=red,bg=red!20!white}
\setbeamercolor{enumerate subitem}{fg=red,bg=red!20!white}
\setbeamercolor{enumerate}{fg=red,bg=red}
\setbeamercolor{itemize item}{fg=orange}
\setbeamercolor{itemize subitem}{fg=orange!50!yellow}
\setbeamercolor{frametitle}{bg=monashblue,fg=white}
\setbeamercolor{title}{fg=white,bg=monashblue}
\setbeamercolor{section}{fg=monashblue}
\setbeamercolor{subsection}{fg=monashblue}
\setbeamercolor{itemize}{fg=black}
\setbeamercolor{alerted text}{fg=orange}
\setbeamercolor{block body alerted}{fg=white,bg=orange}
\setbeamercolor{block body}{fg=black,bg=black!25!white} %monashblue!20!white} %bg=black!40!white}
\setbeamercolor{structure}{fg=monashblue}
\setbeamercolor{block title}{fg=white,bg=monashblue}
\setbeamercolor{block title alerted}{fg=white,bg=black}

%\definecolor{fore}{RGB}{249,242,215}
%\definecolor{back}{RGB}{51,51,51}
%\definecolor{title}{RGB}{155,155,190}
%\setbeamercolor{titlelike}{fg=title}
%\setbeamercolor{normal text}{fg=fore,bg=back}


% Tills' opinion: should be done in an inner theme, not here.

\setbeamertemplate{title page}
{\placefig{-0.01}{-0.01}{width=1.01\paperwidth,height=1.01\paperheight}{MonashTitleSlide}
\begin{textblock}{7.5}(0.5,2.5)\fontsize{24}{30}\sf
{\color{white}\raggedright\usebeamerfont{title}\par\inserttitle}
\end{textblock}
\begin{textblock}{7.5}(0.5,7.5)
{\color{white}\raggedright\textbf{\insertauthor}\\[0.6cm]
\insertdate}
\end{textblock}}

\setbeamertemplate{frametitle}
{
    \nointerlineskip
    \begin{beamercolorbox}[sep=0.25cm,ht=1cm,wd=\paperwidth]{frametitle}
        \vbox{}\vskip-5ex%
        \strut\insertframetitle\strut
        \vskip-0.7ex%
    \end{beamercolorbox}
}

\usesubitemizeitemtemplate{%
    \tiny\raise1.5pt\hbox{\color{beamerstructure}$\blacktriangleright$}%
}
\usesubsubitemizeitemtemplate{%
    \tiny\raise1.5pt\hbox{\color{beamerstructure}$\bigstar$}%
}

\setbeamersize{text margin left=1em,text margin right=1em}

\ifbeamer@secheader\else\setbeamertemplate{headline}[default]\fi

\setbeamerfont{frametitle}{size=\Large,series=\bfseries}
\setbeamerfont{title}{size=\Large,series=\bfseries}

\beamertemplatenavigationsymbolsempty

\setbeamercovered{highly dynamic}

\useinnertheme{squares}
\setbeamertemplate{items}[square]
\setbeamertemplate{enumerate item}[mysquare]

%\setbeamertemplate{footline}[ifttheme]


\mode
<all>

\setbeamerfont{author}{family=\bfseries}

%% HACK TO ALLOW NATBIB TO BE USED
\def\newblock{\relax}
